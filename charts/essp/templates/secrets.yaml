apiVersion: v1
kind: Secret
metadata:
  name: {{ include "essp.fullname" . }}-secrets
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "essp.labels" . | nindent 4 }}
type: Opaque
data:
  {{- if .Values.secrets.database.username }}
  db-username: {{ .Values.secrets.database.username | b64enc | quote }}
  {{- else }}
  db-username: {{ "postgres" | b64enc | quote }}
  {{- end }}
  {{- if .Values.secrets.database.password }}
  db-password: {{ .Values.secrets.database.password | b64enc | quote }}
  {{- else }}
  db-password: {{ "changeme" | b64enc | quote }}
  {{- end }}
  {{- if .Values.secrets.redis.password }}
  redis-password: {{ .Values.secrets.redis.password | b64enc | quote }}
  {{- end }}
  {{- if .Values.secrets.nats.username }}
  nats-username: {{ .Values.secrets.nats.username | b64enc | quote }}
  {{- end }}
  {{- if .Values.secrets.nats.password }}
  nats-password: {{ .Values.secrets.nats.password | b64enc | quote }}
  {{- end }}
  {{- if .Values.secrets.minio.accessKey }}
  minio-access-key: {{ .Values.secrets.minio.accessKey | b64enc | quote }}
  {{- else }}
  minio-access-key: {{ "minioadmin" | b64enc | quote }}
  {{- end }}
  {{- if .Values.secrets.minio.secretKey }}
  minio-secret-key: {{ .Values.secrets.minio.secretKey | b64enc | quote }}
  {{- else }}
  minio-secret-key: {{ "minioadmin" | b64enc | quote }}
  {{- end }}
  {{- if .Values.secrets.jwt.secret }}
  jwt-secret: {{ .Values.secrets.jwt.secret | b64enc | quote }}
  {{- else }}
  jwt-secret: {{ randAlphaNum 32 | b64enc | quote }}
  {{- end }}
