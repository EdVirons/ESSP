# IMS API Environment Configuration Template
# Copy this file to .env and adjust values as needed
# DO NOT commit .env files to version control

# ============================================
# Application Settings
# ============================================
APP_ENV=dev
# Local development uses 8100 (dashboard vite proxy expects this port)
# Docker/production uses 8080
HTTP_ADDR=:8100
LOG_LEVEL=debug

# ============================================
# Database Configuration
# ============================================
# PostgreSQL connection string
# Format: postgres://user:password@host:port/database?options
PG_DSN=postgres://ssp:ssp@localhost:5432/ssp_ims?sslmode=disable

# ============================================
# Redis/Valkey Configuration
# ============================================
REDIS_ADDR=localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# NATS Configuration
# ============================================
NATS_URL=nats://localhost:4222

# ============================================
# MinIO/S3 Configuration
# ============================================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minio
MINIO_SECRET_KEY=minio12345
MINIO_USE_SSL=false
MINIO_REGION=us-east-1
MINIO_PRESIGN_EXPIRY_SECONDS=900

# Attachments/File Upload
ATTACHMENTS_BUCKET=edvirons-ims
ATTACHMENTS_PUBLIC_BASE_URL=http://localhost:9000

# ============================================
# Authentication & Authorization
# ============================================
# For local development, keep AUTH_ENABLED=false
# For production, set to true and configure JWT settings
AUTH_ENABLED=false
AUTH_ISSUER=
AUTH_JWKS_URL=
AUTH_AUDIENCE=ims-service

# Multi-tenancy headers
TENANT_HEADER=X-Tenant-Id
SCHOOL_HEADER=X-School-Id

# Development defaults (used when AUTH_ENABLED=false)
DEV_TENANT_ID=demo-tenant
DEV_SCHOOL_ID=demo-school

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins
# Use "*" for development, specific origins for production
CORS_ALLOWED_ORIGINS=*

# ============================================
# Rate Limiting
# ============================================
# For local development, consider disabling or using high limits
RATE_LIMIT_ENABLED=false

# Read operations (GET requests) per minute per tenant
RATE_LIMIT_READ_RPM=1000

# Write operations (POST/PUT/PATCH/DELETE) per minute per tenant
RATE_LIMIT_WRITE_RPM=500

# Burst capacity (additional requests allowed in short bursts)
RATE_LIMIT_BURST=100

# ============================================
# Work Order Configuration
# ============================================
AUTO_ROUTE_WORK_ORDERS=true
DEFAULT_REPAIR_LOCATION=service_shop

# ============================================
# SSOT Integration
# ============================================
# Base URLs for SSOT services
SCHOOL_SSOT_BASE_URL=http://localhost:8081
DEVICE_SSOT_BASE_URL=http://localhost:8082
PARTS_SSOT_BASE_URL=http://localhost:8083

# Pagination size for SSOT sync operations
SSOT_SYNC_PAGE_SIZE=500

# ============================================
# Environment-Specific Examples
# ============================================

# LOCAL DEVELOPMENT (Default)
# - All services on localhost
# - No authentication
# - No rate limiting
# - Debug logging

# STAGING ENVIRONMENT
# APP_ENV=staging
# LOG_LEVEL=info
# AUTH_ENABLED=true
# AUTH_ISSUER=https://auth.staging.example.com
# AUTH_JWKS_URL=https://auth.staging.example.com/.well-known/jwks.json
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_READ_RPM=500
# RATE_LIMIT_WRITE_RPM=200
# CORS_ALLOWED_ORIGINS=https://app.staging.example.com

# PRODUCTION ENVIRONMENT
# APP_ENV=production
# LOG_LEVEL=info
# AUTH_ENABLED=true
# AUTH_ISSUER=https://auth.example.com
# AUTH_JWKS_URL=https://auth.example.com/.well-known/jwks.json
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_READ_RPM=300
# RATE_LIMIT_WRITE_RPM=100
# CORS_ALLOWED_ORIGINS=https://app.example.com
# MINIO_USE_SSL=true
# MINIO_ENDPOINT=s3.amazonaws.com
