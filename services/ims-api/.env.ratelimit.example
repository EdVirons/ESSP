# Rate Limiting Configuration for IMS API
# Copy this to your .env file and adjust as needed

# ============================================
# Rate Limiting Settings
# ============================================

# Enable or disable rate limiting
# Set to false for local development or testing
# Set to true for production
RATE_LIMIT_ENABLED=true

# Read operations limit (GET requests)
# Number of read requests allowed per minute per tenant
# Recommended values:
#   - Development: 1000
#   - Staging: 500
#   - Production: 300
RATE_LIMIT_READ_RPM=300

# Write operations limit (POST, PATCH, PUT, DELETE)
# Number of write requests allowed per minute per tenant
# Recommended values:
#   - Development: 500
#   - Staging: 200
#   - Production: 100
RATE_LIMIT_WRITE_RPM=100

# Burst capacity (additional requests allowed in short bursts)
# This allows for temporary spikes above the base limit
# Recommended values:
#   - Development: 100
#   - Staging: 75
#   - Production: 50
RATE_LIMIT_BURST=50

# ============================================
# Example Configurations by Environment
# ============================================

# LOCAL DEVELOPMENT (No rate limiting)
# RATE_LIMIT_ENABLED=false

# LOCAL DEVELOPMENT (With rate limiting)
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_READ_RPM=1000
# RATE_LIMIT_WRITE_RPM=500
# RATE_LIMIT_BURST=100

# STAGING (Moderate limits)
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_READ_RPM=500
# RATE_LIMIT_WRITE_RPM=200
# RATE_LIMIT_BURST=75

# PRODUCTION (Conservative limits)
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_READ_RPM=300
# RATE_LIMIT_WRITE_RPM=100
# RATE_LIMIT_BURST=50

# PRODUCTION - HIGH TRAFFIC (Relaxed limits)
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_READ_RPM=600
# RATE_LIMIT_WRITE_RPM=200
# RATE_LIMIT_BURST=100

# ============================================
# Required Dependencies
# ============================================
# Rate limiting requires Redis to be configured:
# REDIS_ADDR=localhost:6379
# REDIS_PASSWORD=
# REDIS_DB=0

# ============================================
# Monitoring & Alerts
# ============================================
# Monitor these metrics:
# - Rate of 429 responses
# - Rate limit remaining values
# - Redis latency and errors
# - Per-tenant request patterns
#
# Set up alerts for:
# - 429 response rate > 5%
# - Redis connection failures
# - Unusually high request rates from specific tenants
